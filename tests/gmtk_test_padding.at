
# verify that obs file -leftPad and -rightPad work

# Converts the test file to each of the supported 
# output observation file types, then calls obs-print
# and compares the output with the manually constructed
# correct answer.

AT_SETUP([Observation file padding (ticket 435)])
AT_DATA([obs1.flat],
[0 0 0.799279 0.199117 0.465240
0 1  0.827937 0.915163 0.056923
0 2  0.808103 0.511985 0.348996
0 3  0.898726 0.050426 0.112256
0 4  4.469021 0.071028 0.819278
0 5  5.469021 0.071028 0.819278
0 6  6.469021 0.071028 0.819278
0 7  7.469021 0.071028 0.819278
0 8  8.469021 0.071028 0.819278
0 9  9.469021 0.071028 0.819278
1 0  0.109863 0.449726 0.386359
1 1  0.211143 0.002314 0.344147
1 2  0.019787 0.844443 0.061727
1 3  0.167814 0.637965 0.771327
1 4  4.951933 0.888219 0.003679
1 5  5.951933 0.888219 0.003679
1 6  6.951933 0.888219 0.003679
1 7  7.951933 0.888219 0.003679
1 8  8.951933 0.888219 0.003679
1 9  9.951933 0.888219 0.003679
2 0  9.199974 0.210933 0.995794
2 1  0.816260 0.406322 0.839980
2 2  0.030454 0.911469 0.224970
2 3  0.144992 0.887106 0.777849
2 4  4.360359 0.076043 0.226881
2 5  5.360359 0.076043 0.226881
2 6  6.360359 0.076043 0.226881
2 7  7.360359 0.076043 0.226881
2 8  8.360359 0.076043 0.226881
2 9  9.360359 0.076043 0.226881
])
AT_DATA([obs2.flat],
[0 0 0.0 0
0 1  0.0 1
0 2  0.0 2
0 3  0.0 3
0 4  0.0 4
0 5  0.0 5
0 6  0.0 6
0 7  0.0 7
0 8  0.0 8
0 9  0.0 9
1 0  1.0 0
1 1  1.0 1
1 2  1.0 2
1 3  1.0 3
1 4  1.0 4
1 5  1.0 5
1 6  1.0 6
1 7  1.0 7
1 8  1.0 8
1 9  1.0 9
2 0  2.0 0
2 1  2.0 1
2 2  2.0 2
2 3  2.0 3
2 4  2.0 4
2 5  2.0 5
2 6  2.0 6
2 7  2.0 7
2 8  2.0 8
2 9  2.0 9
])
# no padding
AT_CHECK([obs-print -of1 obs1.flat -fmt1 flatascii -nf1 3 \
                    -of2 obs2.flat -fmt2 flatascii -nf2 1 -ni2 1],
[],[Processing sentence 0
0 0 0.799279 0.199117 0.465240 0.000000 0
0 1 0.827937 0.915163 0.056923 0.000000 1
0 2 0.808103 0.511985 0.348996 0.000000 2
0 3 0.898726 0.050426 0.112256 0.000000 3
0 4 4.469021 0.071028 0.819278 0.000000 4
0 5 5.469021 0.071028 0.819278 0.000000 5
0 6 6.469021 0.071028 0.819278 0.000000 6
0 7 7.469021 0.071028 0.819278 0.000000 7
0 8 8.469021 0.071028 0.819278 0.000000 8
0 9 9.469021 0.071028 0.819278 0.000000 9
1 0 0.109863 0.449726 0.386359 1.000000 0
1 1 0.211143 0.002314 0.344147 1.000000 1
1 2 0.019787 0.844443 0.061727 1.000000 2
1 3 0.167814 0.637965 0.771327 1.000000 3
1 4 4.951933 0.888219 0.003679 1.000000 4
1 5 5.951933 0.888219 0.003679 1.000000 5
1 6 6.951933 0.888219 0.003679 1.000000 6
1 7 7.951933 0.888219 0.003679 1.000000 7
1 8 8.951933 0.888219 0.003679 1.000000 8
1 9 9.951933 0.888219 0.003679 1.000000 9
2 0 9.199974 0.210933 0.995794 2.000000 0
2 1 0.816260 0.406322 0.839980 2.000000 1
2 2 0.030454 0.911469 0.224970 2.000000 2
2 3 0.144992 0.887106 0.777849 2.000000 3
2 4 4.360359 0.076043 0.226881 2.000000 4
2 5 5.360359 0.076043 0.226881 2.000000 5
2 6 6.360359 0.076043 0.226881 2.000000 6
2 7 7.360359 0.076043 0.226881 2.000000 7
2 8 8.360359 0.076043 0.226881 2.000000 8
2 9 9.360359 0.076043 0.226881 2.000000 9
])
AT_CHECK([obs-print -of1 obs1.flat -fmt1 flatascii -nf1 3        -leftPad1 2 \
                    -of2 obs2.flat -fmt2 flatascii -nf2 1 -ni2 1 -rightPad2 2],
[],[Processing sentence 0
0 0 0.000000 0.000000 0.000000 0.000000 0 
0 1 0.000000 0.000000 0.000000 0.000000 1
0 2 0.799279 0.199117 0.465240 0.000000 2
0 3 0.827937 0.915163 0.056923 0.000000 3
0 4 0.808103 0.511985 0.348996 0.000000 4
0 5 0.898726 0.050426 0.112256 0.000000 5
0 6 4.469021 0.071028 0.819278 0.000000 6
0 7 5.469021 0.071028 0.819278 0.000000 7
0 8 6.469021 0.071028 0.819278 0.000000 8
0 9 7.469021 0.071028 0.819278 0.000000 9
0 10 8.469021 0.071028 0.819278 0.000000 0
0 11 9.469021 0.071028 0.819278 0.000000 0
1 0 0.000000 0.000000 0.000000 1.000000 0
1 1 0.000000 0.000000 0.000000 1.000000 1
1 2 0.109863 0.449726 0.386359 1.000000 2
1 3 0.211143 0.002314 0.344147 1.000000 3
1 4 0.019787 0.844443 0.061727 1.000000 4
1 5 0.167814 0.637965 0.771327 1.000000 5
1 6 4.951933 0.888219 0.003679 1.000000 6
1 7 5.951933 0.888219 0.003679 1.000000 7
1 8 6.951933 0.888219 0.003679 1.000000 8
1 9 7.951933 0.888219 0.003679 1.000000 9
1 10 8.951933 0.888219 0.003679 0.000000 0
1 11 9.951933 0.888219 0.003679 0.000000 0
2 0 0.000000 0.000000 0.000000 2.000000 0
2 1 0.000000 0.000000 0.000000 2.000000 1
2 2 9.199974 0.210933 0.995794 2.000000 2
2 3 0.816260 0.406322 0.839980 2.000000 3
2 4 0.030454 0.911469 0.224970 2.000000 4
2 5 0.144992 0.887106 0.777849 2.000000 5
2 6 4.360359 0.076043 0.226881 2.000000 6
2 7 5.360359 0.076043 0.226881 2.000000 7
2 8 6.360359 0.076043 0.226881 2.000000 8
2 9 7.360359 0.076043 0.226881 2.000000 9
2 10 8.360359 0.076043 0.226881 0.000000 0
2 11 9.360359 0.076043 0.226881 0.000000 0
])
AT_CHECK([
obs-print -of1 obs1.flat -fmt1 flatascii -nf1 3        -o obs1.pfile -ofmt pfile
obs-print -of1 obs2.flat -fmt1 flatascii -nf1 1 -ni1 1 -o obs2.pfile -ofmt pfile],[],[ignore])
AT_CHECK([
obs-print -of1 obs1.pfile -leftPad1 2 \
          -of2 obs2.pfile -rightPad2 2],
[],[Processing sentence 0
0 0 0.000000 0.000000 0.000000 0.000000 0 
0 1 0.000000 0.000000 0.000000 0.000000 1
0 2 0.799279 0.199117 0.465240 0.000000 2
0 3 0.827937 0.915163 0.056923 0.000000 3
0 4 0.808103 0.511985 0.348996 0.000000 4
0 5 0.898726 0.050426 0.112256 0.000000 5
0 6 4.469021 0.071028 0.819278 0.000000 6
0 7 5.469021 0.071028 0.819278 0.000000 7
0 8 6.469021 0.071028 0.819278 0.000000 8
0 9 7.469021 0.071028 0.819278 0.000000 9
0 10 8.469021 0.071028 0.819278 0.000000 0
0 11 9.469021 0.071028 0.819278 0.000000 0
1 0 0.000000 0.000000 0.000000 1.000000 0
1 1 0.000000 0.000000 0.000000 1.000000 1
1 2 0.109863 0.449726 0.386359 1.000000 2
1 3 0.211143 0.002314 0.344147 1.000000 3
1 4 0.019787 0.844443 0.061727 1.000000 4
1 5 0.167814 0.637965 0.771327 1.000000 5
1 6 4.951933 0.888219 0.003679 1.000000 6
1 7 5.951933 0.888219 0.003679 1.000000 7
1 8 6.951933 0.888219 0.003679 1.000000 8
1 9 7.951933 0.888219 0.003679 1.000000 9
1 10 8.951933 0.888219 0.003679 0.000000 0
1 11 9.951933 0.888219 0.003679 0.000000 0
2 0 0.000000 0.000000 0.000000 2.000000 0
2 1 0.000000 0.000000 0.000000 2.000000 1
2 2 9.199974 0.210933 0.995794 2.000000 2
2 3 0.816260 0.406322 0.839980 2.000000 3
2 4 0.030454 0.911469 0.224970 2.000000 4
2 5 0.144992 0.887106 0.777849 2.000000 5
2 6 4.360359 0.076043 0.226881 2.000000 6
2 7 5.360359 0.076043 0.226881 2.000000 7
2 8 6.360359 0.076043 0.226881 2.000000 8
2 9 7.360359 0.076043 0.226881 2.000000 9
2 10 8.360359 0.076043 0.226881 0.000000 0
2 11 9.360359 0.076043 0.226881 0.000000 0
])
AT_CHECK([
obs-print -of1 obs1.flat -fmt1 flatascii -nf1 3        -o obs1.bin -ofmt binary -olist obs1.bin
obs-print -of1 obs2.flat -fmt1 flatascii -nf1 1 -ni1 1 -o obs2.bin -ofmt binary -olist obs2.bin],[],[ignore])
AT_CHECK([
obs-print -of1 obs1.bin -fmt1 binary -nf1 3         -leftPad1 2 \
          -of2 obs2.bin -fmt2 binary -nf2 1 -ni2 1 -rightPad2 2],
[],[Processing sentence 0
0 0 0.000000 0.000000 0.000000 0.000000 0 
0 1 0.000000 0.000000 0.000000 0.000000 1
0 2 0.799279 0.199117 0.465240 0.000000 2
0 3 0.827937 0.915163 0.056923 0.000000 3
0 4 0.808103 0.511985 0.348996 0.000000 4
0 5 0.898726 0.050426 0.112256 0.000000 5
0 6 4.469021 0.071028 0.819278 0.000000 6
0 7 5.469021 0.071028 0.819278 0.000000 7
0 8 6.469021 0.071028 0.819278 0.000000 8
0 9 7.469021 0.071028 0.819278 0.000000 9
0 10 8.469021 0.071028 0.819278 0.000000 0
0 11 9.469021 0.071028 0.819278 0.000000 0
1 0 0.000000 0.000000 0.000000 1.000000 0
1 1 0.000000 0.000000 0.000000 1.000000 1
1 2 0.109863 0.449726 0.386359 1.000000 2
1 3 0.211143 0.002314 0.344147 1.000000 3
1 4 0.019787 0.844443 0.061727 1.000000 4
1 5 0.167814 0.637965 0.771327 1.000000 5
1 6 4.951933 0.888219 0.003679 1.000000 6
1 7 5.951933 0.888219 0.003679 1.000000 7
1 8 6.951933 0.888219 0.003679 1.000000 8
1 9 7.951933 0.888219 0.003679 1.000000 9
1 10 8.951933 0.888219 0.003679 0.000000 0
1 11 9.951933 0.888219 0.003679 0.000000 0
2 0 0.000000 0.000000 0.000000 2.000000 0
2 1 0.000000 0.000000 0.000000 2.000000 1
2 2 9.199974 0.210933 0.995794 2.000000 2
2 3 0.816260 0.406322 0.839980 2.000000 3
2 4 0.030454 0.911469 0.224970 2.000000 4
2 5 0.144992 0.887106 0.777849 2.000000 5
2 6 4.360359 0.076043 0.226881 2.000000 6
2 7 5.360359 0.076043 0.226881 2.000000 7
2 8 6.360359 0.076043 0.226881 2.000000 8
2 9 7.360359 0.076043 0.226881 2.000000 9
2 10 8.360359 0.076043 0.226881 0.000000 0
2 11 9.360359 0.076043 0.226881 0.000000 0
])
AT_CHECK([
obs-print -of1 obs1.flat -fmt1 flatascii -nf1 3        -o obs1.asc -ofmt ascii -olist obs1.asc -ns
obs-print -of1 obs2.flat -fmt1 flatascii -nf1 1 -ni1 1 -o obs2.asc -ofmt ascii -olist obs2.asc -ns],[],[ignore])
AT_CHECK([
obs-print -of1 obs1.asc -fmt1 ascii -nf1 3         -leftPad1 2 \
          -of2 obs2.asc -fmt2 ascii -nf2 1 -ni2 1 -rightPad2 2],
[],[Processing sentence 0
0 0 0.000000 0.000000 0.000000 0.000000 0 
0 1 0.000000 0.000000 0.000000 0.000000 1
0 2 0.799279 0.199117 0.465240 0.000000 2
0 3 0.827937 0.915163 0.056923 0.000000 3
0 4 0.808103 0.511985 0.348996 0.000000 4
0 5 0.898726 0.050426 0.112256 0.000000 5
0 6 4.469021 0.071028 0.819278 0.000000 6
0 7 5.469021 0.071028 0.819278 0.000000 7
0 8 6.469021 0.071028 0.819278 0.000000 8
0 9 7.469021 0.071028 0.819278 0.000000 9
0 10 8.469021 0.071028 0.819278 0.000000 0
0 11 9.469021 0.071028 0.819278 0.000000 0
1 0 0.000000 0.000000 0.000000 1.000000 0
1 1 0.000000 0.000000 0.000000 1.000000 1
1 2 0.109863 0.449726 0.386359 1.000000 2
1 3 0.211143 0.002314 0.344147 1.000000 3
1 4 0.019787 0.844443 0.061727 1.000000 4
1 5 0.167814 0.637965 0.771327 1.000000 5
1 6 4.951933 0.888219 0.003679 1.000000 6
1 7 5.951933 0.888219 0.003679 1.000000 7
1 8 6.951933 0.888219 0.003679 1.000000 8
1 9 7.951933 0.888219 0.003679 1.000000 9
1 10 8.951933 0.888219 0.003679 0.000000 0
1 11 9.951933 0.888219 0.003679 0.000000 0
2 0 0.000000 0.000000 0.000000 2.000000 0
2 1 0.000000 0.000000 0.000000 2.000000 1
2 2 9.199974 0.210933 0.995794 2.000000 2
2 3 0.816260 0.406322 0.839980 2.000000 3
2 4 0.030454 0.911469 0.224970 2.000000 4
2 5 0.144992 0.887106 0.777849 2.000000 5
2 6 4.360359 0.076043 0.226881 2.000000 6
2 7 5.360359 0.076043 0.226881 2.000000 7
2 8 6.360359 0.076043 0.226881 2.000000 8
2 9 7.360359 0.076043 0.226881 2.000000 9
2 10 8.360359 0.076043 0.226881 0.000000 0
2 11 9.360359 0.076043 0.226881 0.000000 0
])
AT_CLEANUP

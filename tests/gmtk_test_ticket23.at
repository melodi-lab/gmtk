
# Verify that https://j.ee.washington.edu/trac/gmtk/ticket/23 is fixed

AT_SETUP([ticket 23])
AT_SKIP_IF([test ! -d $TEST_AND_DEV/ticket23])
AT_CHECK([obs-concat -i1 $TEST_AND_DEV/ticket23/obs1.pfile \
                     -i2 $TEST_AND_DEV/ticket23/obs2.pfile \
                     -o obs3.pfile -ofmt pfile],
         [],[ignore],[ignore])
AT_CHECK([obs-concat -i1 obs3.pfile],
         [],[Processing sentence 0 of file obs3.pfile
0 0 0.799279 0.199117 0.465240
0 1 0.827937 0.915163 0.056923
0 2 0.808103 0.511985 0.348996
0 3 0.898726 0.050426 0.112256
0 4 0.469021 0.071028 0.819278
1 0 0.109863 0.449726 0.386359
1 1 0.211143 0.002314 0.344147
1 2 0.019787 0.844443 0.061727
1 3 0.167814 0.637965 0.771327
1 4 0.951933 0.888219 0.003679
2 0 0.199974 0.210933 0.995794
2 1 0.816260 0.406322 0.839980
2 2 0.030454 0.911469 0.224970
2 3 0.144992 0.887106 0.777849
2 4 0.360359 0.076043 0.226881
3 0 0.558700 0.480687 0.564081
3 1 0.174304 0.688214 0.997691
3 2 0.151579 0.482951 0.175250
3 3 0.954787 0.958915 0.268522
3 4 0.864795 0.824253 0.010822
4 0 0.732089 0.457285 0.426172
4 1 0.878421 0.041987 0.604711
4 2 0.413176 0.410941 0.412888
4 3 0.696961 0.268296 0.811189
4 4 0.277390 0.260635 0.533471
5 0 0.347269 0.334358 0.182503
5 1 0.050299 0.940725 0.631530
5 2 0.622470 0.997451 0.701137
5 3 0.935048 0.275441 0.322006
5 4 0.013628 0.820099 0.743958
])
AT_CLEANUP